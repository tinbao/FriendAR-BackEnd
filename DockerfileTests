FROM maven:alpine
# application placed into /opt/app
RUN mkdir -p /opt/app
WORKDIR /opt/app

# selectively add the POM file and
# install dependencies
COPY ./friendar-rest-api/pom.xml /opt/app/
RUN mvn install -Dmaven.test.skip=true
RUN mvn clean test
RUN mvn pmd:check
RUN mvn pmd:cpd-check